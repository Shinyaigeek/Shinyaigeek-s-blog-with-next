{"ast":null,"code":"import React from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport '../assets/css/sharemodal.scss';\nexport default class ShareModal extends React.Component {\n  constructor(props) {\n    super(props); // @ts-ignore\n\n    const childrenHeight = this.props.children ? 43 * this.props.children.length : 0;\n    this.state = {\n      height: 0,\n      childrenHeight: childrenHeight,\n      modalHeight: 0\n    };\n    this.handleMove = this.handleMove.bind(this);\n    this.handleHeight = this.handleHeight.bind(this);\n    this.handleEnd = this.handleEnd.bind(this);\n    this.handleWindowSizeChange = this.handleWindowSizeChange.bind(this);\n    this.handleFlag = this.handleFlag.bind(this);\n  }\n\n  async handleWindowSizeChange() {\n    await this.setState({\n      height: window.innerHeight,\n      childrenHeight: this.state.childrenHeight,\n      modalHeight: 0\n    });\n    await this.setState({\n      height: this.state.height,\n      childrenHeight: this.state.childrenHeight,\n      modalHeight: this.state.height - 90 - this.state.childrenHeight\n    });\n  }\n\n  componentDidMount() {\n    this.handleWindowSizeChange(); // Set width\n\n    window.addEventListener('resize', this.handleWindowSizeChange);\n  }\n\n  async handleHeight(y) {\n    await this.setState({\n      height: this.state.height,\n      childrenHeight: this.state.childrenHeight,\n      modalHeight: y\n    });\n  }\n\n  handleMove(e) {\n    const y = e.changedTouches[0].clientY;\n    return this.handleHeight(y);\n  }\n\n  handleEnd(e) {\n    const endY = e.changedTouches[0].clientY; // @ts-ignore\n\n    const childrenHeight = this.props.children ? 43 * this.props.children.length : 0;\n    const height = window.innerHeight - 90 - this.state.childrenHeight;\n\n    if (endY >= height * 1.2) {\n      this.handleHeight(height);\n      return this.handleFlag(false);\n    }\n\n    return this.handleHeight(height);\n  }\n\n  handleFlag(flag) {\n    if (flag) {\n      document.querySelector('html').style.overflow = \"hidden\";\n      return this.props.handleFlag(flag);\n    } else {\n      document.querySelector('html').style.overflow = \"visible\";\n      return this.props.handleFlag(flag);\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", null, React.createElement(CSSTransition, {\n      in: this.props.flag,\n      timeout: 500,\n      className: this.props.NightMode ? \"Darktwitter--modal\" : \"twitter--modal\",\n      id: this.props.id,\n      onTouchMove: e => this.handleMove(e),\n      style: {\n        top: this.state.modalHeight\n      },\n      onTouchEnd: e => this.handleEnd(e)\n    }, React.createElement(\"div\", null, this.props.children, React.createElement(\"div\", {\n      className: \"modal--section__cansel\",\n      onClick: () => this.handleFlag(false)\n    }, \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"))), React.createElement(\"div\", {\n      className: \"awkward--sheet\",\n      onClick: () => this.handleFlag(false),\n      style: {\n        display: this.props.flag ? \"block\" : \"none\"\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/hayashihitoshi/Shinyaigeek-s-blog-with-next/components/ShareModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport {CSSTransition} from 'react-transition-group'\n\nimport '../assets/css/sharemodal.scss'\n\ninterface TProps {\n    flag:boolean,\n    NightMode:boolean,\n    handleFlag:Function,\n    id:string,\n}\n\ninterface TState{\n    height:number,\n    childrenHeight:number,\n    modalHeight:number\n}\n\nexport default class ShareModal extends React.Component <TProps,TState> {\n    constructor(props:TProps){\n        super(props)\n        // @ts-ignore\n        const childrenHeight:number = this.props.children ? 43 * this.props.children.length:0;\n        this.state = {\n            height:0,\n            childrenHeight:childrenHeight,\n            modalHeight:0\n        }\n\n        this.handleMove = this.handleMove.bind(this);\n        this.handleHeight = this.handleHeight.bind(this);\n        this.handleEnd = this.handleEnd.bind(this);\n        this.handleWindowSizeChange = this.handleWindowSizeChange.bind(this);\n        this.handleFlag = this.handleFlag.bind(this)\n    }\n\n    async handleWindowSizeChange() {\n        await this.setState({ \n            height: window.innerHeight,\n            childrenHeight:this.state.childrenHeight,\n            modalHeight:0\n        })\n        await this.setState({\n            height:this.state.height,\n            childrenHeight:this.state.childrenHeight,\n            modalHeight:this.state.height - 90 - this.state.childrenHeight\n        })\n    }\n\n    componentDidMount() {\n        this.handleWindowSizeChange() // Set width\n        window.addEventListener('resize', this.handleWindowSizeChange)\n    }\n\n    async handleHeight(y:number){\n        await this.setState({\n            height:this.state.height,\n            childrenHeight:this.state.childrenHeight,\n            modalHeight:y\n        })\n    }\n\n    handleMove(e:any){\n        const y = e.changedTouches[0].clientY;\n        return this.handleHeight(y);\n    }\n\n    handleEnd(e:any){\n        const endY = e.changedTouches[0].clientY;\n        // @ts-ignore\n        const childrenHeight:number = this.props.children ? 43 * this.props.children.length:0;\n        const height:number = window.innerHeight - 90 - this.state.childrenHeight;\n        if(endY >= height * 1.2){\n            this.handleHeight(height);\n            return this.handleFlag(false);\n        }\n        return this.handleHeight(height);\n    }\n\n    handleFlag(flag:boolean) {\n        if(flag){\n            document.querySelector('html').style.overflow = \"hidden\";\n            return this.props.handleFlag(flag)\n        }else{\n            document.querySelector('html').style.overflow = \"visible\";\n            return this.props.handleFlag(flag)\n        }\n\n    }\n\n    render() {\n        return (\n            <div>\n                <CSSTransition\n                    in={this.props.flag}\n                    timeout={500}\n                    className={this.props.NightMode ? \"Darktwitter--modal\":\"twitter--modal\"}\n                    id={this.props.id}\n                    onTouchMove={(e:any) => this.handleMove(e)}\n                    style={{top:this.state.modalHeight}}\n                    onTouchEnd={(e:any) => this.handleEnd(e)}\n                >\n                <div>\n                {this.props.children}\n                <div className=\"modal--section__cansel\" onClick={() => this.handleFlag(false)}>キャンセル</div>\n                </div>\n                </CSSTransition>\n                <div className=\"awkward--sheet\" onClick={() => this.handleFlag(false)} style={{display:this.props.flag ? \"block\":\"none\"}}></div>\n            </div>\n        )\n    }\n}"],"sourceRoot":""},"metadata":{},"sourceType":"module"}