{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport '../assets/css/sharemodal.scss';\n\nvar ShareModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ShareModal, _React$Component);\n\n  function ShareModal(props) {\n    var _this;\n\n    _classCallCheck(this, ShareModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ShareModal).call(this, props)); // @ts-ignore\n\n    var childrenHeight = _this.props.children ? 43 * _this.props.children.length : 0;\n    _this.state = {\n      height: 0,\n      childrenHeight: childrenHeight,\n      modalHeight: 0\n    };\n    _this.handleMove = _this.handleMove.bind(_assertThisInitialized(_this));\n    _this.handleHeight = _this.handleHeight.bind(_assertThisInitialized(_this));\n    _this.handleEnd = _this.handleEnd.bind(_assertThisInitialized(_this));\n    _this.handleWindowSizeChange = _this.handleWindowSizeChange.bind(_assertThisInitialized(_this));\n    _this.handleFlag = _this.handleFlag.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(ShareModal, [{\n    key: \"handleWindowSizeChange\",\n    value: function () {\n      var _handleWindowSizeChange = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.setState({\n                  height: window.innerHeight,\n                  childrenHeight: this.state.childrenHeight,\n                  modalHeight: 0\n                });\n\n              case 2:\n                _context.next = 4;\n                return this.setState({\n                  height: this.state.height,\n                  childrenHeight: this.state.childrenHeight,\n                  modalHeight: this.state.height - 90 - this.state.childrenHeight\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleWindowSizeChange() {\n        return _handleWindowSizeChange.apply(this, arguments);\n      }\n\n      return handleWindowSizeChange;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.handleWindowSizeChange(); // Set width\n\n      window.addEventListener('resize', this.handleWindowSizeChange);\n    }\n  }, {\n    key: \"handleHeight\",\n    value: function () {\n      var _handleHeight = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(y) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(y);\n                _context2.next = 3;\n                return this.setState({\n                  height: this.state.height,\n                  childrenHeight: this.state.childrenHeight,\n                  modalHeight: y\n                });\n\n              case 3:\n                console.log(this.state);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleHeight(_x) {\n        return _handleHeight.apply(this, arguments);\n      }\n\n      return handleHeight;\n    }()\n  }, {\n    key: \"handleMove\",\n    value: function handleMove(e) {\n      console.log(e.changedTouches);\n      var y = e.changedTouches[0].clientY;\n      return this.handleHeight(y);\n    }\n  }, {\n    key: \"handleEnd\",\n    value: function handleEnd(e) {\n      var endY = e.changedTouches[0].clientY; // @ts-ignore\n\n      var childrenHeight = this.props.children ? 43 * this.props.children.length : 0;\n      var height = window.innerHeight - 90 - this.state.childrenHeight;\n\n      if (endY >= height * 1.2) {\n        this.handleHeight(height);\n        return this.handleFlag(false);\n      }\n\n      return this.handleHeight(height);\n    }\n  }, {\n    key: \"handleFlag\",\n    value: function handleFlag(flag) {\n      if (flag) {\n        document.querySelector('html').style.overflow = \"hidden\";\n        return this.props.handleFlag(flag);\n      } else {\n        document.querySelector('html').style.overflow = \"visible\";\n        return this.props.handleFlag(flag);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.props);\n      console.log(this.state);\n      return React.createElement(\"div\", null, React.createElement(CSSTransition, {\n        in: this.props.flag,\n        timeout: 500,\n        className: this.props.NightMode ? \"Darktwitter--modal\" : \"twitter--modal\",\n        id: this.props.id,\n        onTouchMove: function onTouchMove(e) {\n          return _this2.handleMove(e);\n        },\n        style: {\n          top: this.state.modalHeight\n        },\n        onTouchEnd: function onTouchEnd(e) {\n          return _this2.handleEnd(e);\n        }\n      }, React.createElement(\"div\", null, this.props.children, React.createElement(\"div\", {\n        className: \"modal--section__cansel\",\n        onClick: function onClick() {\n          return _this2.handleFlag(false);\n        }\n      }, \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"))), React.createElement(\"div\", {\n        className: \"awkward--sheet\",\n        onClick: function onClick() {\n          return _this2.handleFlag(false);\n        },\n        style: {\n          display: this.props.flag ? \"block\" : \"none\"\n        }\n      }));\n    }\n  }]);\n\n  return ShareModal;\n}(React.Component);\n\nexport { ShareModal as default };","map":{"version":3,"sources":["/Users/hayashihitoshi/Shinyaigeek-s-blog-with-next/components/ShareModal.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport {CSSTransition} from 'react-transition-group'\n\nimport '../assets/css/sharemodal.scss'\n\ninterface TProps {\n    flag:boolean,\n    NightMode:boolean,\n    handleFlag:Function,\n    id:string\n}\n\ninterface TState{\n    height:number,\n    childrenHeight:number,\n    modalHeight:number\n}\n\nexport default class ShareModal extends React.Component <TProps,TState> {\n    constructor(props:TProps){\n        super(props)\n        // @ts-ignore\n        const childrenHeight:number = this.props.children ? 43 * this.props.children.length:0;\n        this.state = {\n            height:0,\n            childrenHeight:childrenHeight,\n            modalHeight:0\n        }\n\n        this.handleMove = this.handleMove.bind(this);\n        this.handleHeight = this.handleHeight.bind(this);\n        this.handleEnd = this.handleEnd.bind(this);\n        this.handleWindowSizeChange = this.handleWindowSizeChange.bind(this);\n        this.handleFlag = this.handleFlag.bind(this)\n    }\n\n    async handleWindowSizeChange() {\n        await this.setState({ \n            height: window.innerHeight,\n            childrenHeight:this.state.childrenHeight,\n            modalHeight:0\n        })\n        await this.setState({\n            height:this.state.height,\n            childrenHeight:this.state.childrenHeight,\n            modalHeight:this.state.height - 90 - this.state.childrenHeight\n        })\n    }\n\n    componentDidMount() {\n        this.handleWindowSizeChange() // Set width\n        window.addEventListener('resize', this.handleWindowSizeChange)\n    }\n\n    async handleHeight(y:number){\n        console.log(y)\n        await this.setState({\n            height:this.state.height,\n            childrenHeight:this.state.childrenHeight,\n            modalHeight:y\n        })\n        console.log(this.state)\n    }\n\n    handleMove(e:any){\n        console.log(e.changedTouches)\n        const y = e.changedTouches[0].clientY;\n        return this.handleHeight(y);\n    }\n\n    handleEnd(e:any){\n        const endY = e.changedTouches[0].clientY;\n        // @ts-ignore\n        const childrenHeight:number = this.props.children ? 43 * this.props.children.length:0;\n        const height:number = window.innerHeight - 90 - this.state.childrenHeight;\n        if(endY >= height * 1.2){\n            this.handleHeight(height);\n            return this.handleFlag(false);\n        }\n        return this.handleHeight(height);\n    }\n\n    handleFlag(flag:boolean) {\n        if(flag){\n            document.querySelector('html').style.overflow = \"hidden\";\n            return this.props.handleFlag(flag)\n        }else{\n            document.querySelector('html').style.overflow = \"visible\";\n            return this.props.handleFlag(flag)\n        }\n\n    }\n\n    render() {\n        console.log(this.props)\n        console.log(this.state)\n        return (\n            <div>\n                <CSSTransition\n                    in={this.props.flag}\n                    timeout={500}\n                    className={this.props.NightMode ? \"Darktwitter--modal\":\"twitter--modal\"}\n                    id={this.props.id}\n                    onTouchMove={(e:any) => this.handleMove(e)}\n                    style={{top:this.state.modalHeight}}\n                    onTouchEnd={(e:any) => this.handleEnd(e)}\n                >\n                <div>\n                {this.props.children}\n                <div className=\"modal--section__cansel\" onClick={() => this.handleFlag(false)}>キャンセル</div>\n                </div>\n                </CSSTransition>\n                <div className=\"awkward--sheet\" onClick={() => this.handleFlag(false)} style={{display:this.props.flag ? \"block\":\"none\"}}></div>\n            </div>\n        )\n    }\n}"],"sourceRoot":""},"metadata":{},"sourceType":"module"}